<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>
   Nex.fun - Meme Token Generator
  </title>
<meta content="Create your meme coin instantly on-chain. Powered by Nexus Network." name="description"/>
<link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet"/>
<script>
   function toggleSocialInputs() {
  const section = document.getElementById('optionalSocials');
  section.classList.toggle('hidden');
}
  </script>
<script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js">
</script>
</head>
<body class="bg-black text-white min-h-screen font-sans">
<!-- Header -->
<div class="flex items-center justify-between px-4 py-4 relative">
<div class="text-xl font-light tracking-wide">
    Nex.fun
   </div>
<div class="relative">
<div class="flex items-center space-x-2 bg-gray-900 px-3 py-1 rounded-full cursor-pointer" id="walletAddress">
<div class="w-4 h-4 bg-blue-500 rounded-full">
</div>
<span class="text-sm">
      Connect Wallet
     </span>
</div>
<div class="absolute right-0 mt-2 bg-gray-800 border border-gray-600 p-3 rounded hidden z-50" id="walletPopup">
<p class="text-green-400 text-sm mb-2">
      Connected
     </p>
<button class="bg-red-600 hover:bg-red-700 px-2 py-1 text-xs rounded" onclick="disconnectWallet()">
      Disconnect
     </button>
</div>
</div>
</div>
<!-- Create Coin Section -->
<div class="max-w-md mx-auto p-6">
<h2 class="text-xl font-bold mb-4">
    Create New Coin
   </h2>
<form class="space-y-4" id="createCoinForm">
<input class="w-full p-3 rounded bg-gray-800 border border-gray-700" id="tokenName" placeholder="Coin Name" type="text"/>
<input class="w-full p-3 rounded bg-gray-800 border border-gray-700" id="tokenSymbol" placeholder="Ticker (e.g. NEX)" type="text"/>
<textarea class="w-full p-3 rounded bg-gray-800 border border-gray-700" id="tokenDesc" placeholder="Short Description (optional)"></textarea>
</form>
<!-- Social Links Section -->
<div class="mb-4">
<label class="block text-white mb-1 font-medium">
  Add social links <span class="text-gray-400 text-sm">(optional)</span>
  <button class="ml-2 text-white" onclick="toggleLinks()" type="button">+</button>
</label>
<div class="hidden mt-2" id="socialLinks">
<input class="w-full p-2 mb-2 bg-gray-800 text-white rounded" id="websiteUrl" placeholder="Website URL" type="url"/>
<input class="w-full p-2 mb-2 bg-gray-800 text-white rounded" id="twitterUrl" placeholder="Twitter URL" type="url"/>
<input class="w-full p-2 mb-2 bg-gray-800 text-white rounded" id="telegramUrl" placeholder="Telegram URL" type="url"/>
</div><button class="w-full bg-white text-black font-bold py-3 rounded hover:bg-gray-200" type="submit">Create Coin</button>
</div>
<script>
  function toggleLinks() {
    const links = document.getElementById('socialLinks');
    links.classList.toggle('hidden');
  }
</script>
<!-- Bottom Navigation -->
<div class="fixed bottom-0 left-0 right-0 bg-black border-t border-gray-700 flex justify-around py-2 z-50">
<button class="text-white flex flex-col items-center text-sm" onclick="navigateHome()">
<svg class="w-6 h-6 mb-1" fill="none" stroke="currentColor" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path d="M3 12l2-2m0 0l7-7 7 7M13 5v6h6v11H5V11h6V5z" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
</path>
</svg>
     Home
    </button>
<button class="text-white bg-white text-black px-4 py-2 rounded-full -mt-6 shadow-lg" onclick="scrollToTop()">
     +
    </button>
<button class="text-white flex flex-col items-center text-sm" onclick="navigateProfile()">
<svg class="w-6 h-6 mb-1" fill="none" stroke="currentColor" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path d="M5.121 17.804A13.937 13.937 0 0112 15c2.21 0 4.29.534 6.121 1.474M15 11a3 3 0 11-6 0 3 3 0 016 0z" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
</path>
</svg>
     Profile
    </button>
</div>
<script>
    function scrollToTop() {
    window.scrollTo({ top: 0, behavior: 'smooth' });
  }
  function navigateHome() {
    alert("Home clicked!");
  }
  function navigateProfile() {
    alert("Profile clicked!");
  }
   </script>
<div class="text-green-400 mt-4 text-center" id="txResult">
</div>
<button class="hidden w-full mt-4 bg-white text-black font-bold py-3 rounded hover:bg-gray-200" id="buyTokenButton" onclick="buyToken()">
    Buy Token
   </button>
</div>
<script>
   const provider = new ethers.providers.Web3Provider(window.ethereum);
  const signer = provider.getSigner();
  const nexusChain = {
    chainId: '0x189',
    chainName: 'Nexus',
    rpcUrls: ['https://rpc.nexus.xyz/http'],
    nativeCurrency: { name: 'Nexus', symbol: 'NEX', decimals: 18 },
    blockExplorerUrls: ['https://nexus-new.explorer.caldera.xyz']
  };

  let isConnected = false;
  let saleAddress = "";

  async function switchToNexus() {
    try {
      await window.ethereum.request({ method: 'wallet_addEthereumChain', params: [nexusChain] });
    } catch (error) {
      console.error(error);
    }
  }

  async function connectWallet() {
    await provider.send("eth_requestAccounts", []);
    const address = await signer.getAddress();
    document.getElementById('walletAddress').innerHTML = `
  <div class="w-4 h-4 bg-green-500 rounded-full"></div>
  <span class="text-sm">${address.slice(0, 5)}...${address.slice(-3)}</span>`;
    document.getElementById('walletPopup').classList.remove('hidden');
    isConnected = true;
  }

  window.addEventListener('DOMContentLoaded', () => {
  document.getElementById('walletAddress').addEventListener('click', async () => {
    if (!isConnected) {
      await switchToNexus();
      await connectWallet();
    } else {
      const popup = document.getElementById('walletPopup');
      popup.classList.toggle('hidden');
    }
  });
});

  function disconnectWallet() {
    isConnected = false;
    document.getElementById('walletPopup').classList.add('hidden');
    document.getElementById('walletAddress').innerHTML = `
      <div class="w-4 h-4 bg-blue-500 rounded-full"></div>
      <span class="text-sm">Connect Wallet</span>`;
  }

  document.getElementById('createCoinForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    const name = document.getElementById('tokenName').value;
    const symbol = document.getElementById('tokenSymbol').value;
    const supply = "1000000000";

    const tokenABI = ["function transfer(address to, uint256 amount) public returns (bool)", "constructor(string memory name, string memory symbol, uint256 initialSupply)"];
    const tokenBytecode = "0x60806040523480156200001157600080fd5b50604080518082018252600981526826b2b6b2aa37b5b2b760b91b6020808301918252835180850190945260048452634d454d4560e01b9084015281519192916200005f9160039162000182565b5080516200007590600490602084019062000182565b505050620000b0336200008d620000b660201b60201c565b6200009a90600a620002d0565b620000aa90633b9aca00620003c8565b620000bb565b6200043d565b601290565b6001600160a01b038216620000ed5760405162461bcd60e51b8152600401620000e49062000228565b60405180910390fd5b620000fb600083836200017d565b80600260008282546200010f919062000268565b90915550506001600160a01b038216600081815260208190526040808220805485019055517fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef90620001639085906200025f565b60405180910390a362000179600083836200017d565b5050565b505050565b8280546200019090620003ea565b90600052602060002090601f016020900481019282620001b45760008555620001ff565b82601f10620001cf57805160ff1916838001178555620001ff565b82800160010185558215620001ff579182015b82811115620001ff578251825591602001919060010190620001e2565b506200020d92915062000211565b5090565b5b808211156200020d576000815560010162000212565b6020808252601f908201527f45524332303a206d696e7420746f20746865207a65726f206164647265737300604082015260600190565b90815260200190565b600082198211156200027e576200027e62000427565b500190565b80825b6001808611620002975750620002c7565b818704821115620002ac57620002ac62000427565b80861615620002ba57918102915b9490941c93800262000286565b94509492505050565b6000620002e460001960ff851684620002eb565b9392505050565b600082620002fc57506001620002e4565b816200030b57506000620002e4565b81600181146200032457600281146200032f5762000363565b6001915050620002e4565b60ff84111562000343576200034362000427565b6001841b9150848211156200035c576200035c62000427565b50620002e4565b5060208310610133831016604e8410600b84101617156200039b575081810a8381111562000395576200039562000427565b620002e4565b620003aa848484600162000283565b808604821115620003bf57620003bf62000427565b02949350505050565b6000816000190483118215151615620003e557620003e562000427565b500290565b600281046001821680620003ff57607f821691505b602082108114156200042157634e487b7160e01b600052602260045260246000fd5b50919050565b634e487b7160e01b600052601160045260246000fd5b610b0b806200044d6000396000f3fe608060405234801561001057600080fd5b50600436106100cf5760003560e01c806342966c681161008c57806395d89b411161006657806395d89b411461019d578063a457c2d7146101a5578063a9059cbb146101b8578063dd62ed3e146101cb576100cf565b806342966c681461016257806370a082311461017757806379cc67901461018a576100cf565b806306fdde03146100d4578063095ea7b3146100f257806318160ddd1461011257806323b872dd14610127578063313ce5671461013a578063395093511461014f575b600080fd5b6100dc6101de565b6040516100e991906107b9565b60405180910390f35b61010561010036600461076d565b610270565b6040516100e991906107ae565b61011a610292565b6040516100e99190610a5f565b610105610135366004610732565b610298565b6101426102c6565b6040516100e99190610a68565b61010561015d36600461076d565b6102cb565b610175610170366004610796565b6102f7565b005b61011a6101853660046106df565b61030b565b61017561019836600461076d565b61032a565b6100dc61034a565b6101056101b336600461076d565b610359565b6101056101c636600461076d565b6103aa565b61011a6101d9366004610700565b6103c2565b6060600380546101ed90610a9a565b80601f016020809104026020016040519081016040528092919081815260200182805461021990610a9a565b80156102665780601f1061023b57610100808354040283529160200191610266565b820191906000526020600020905b81548152906001019060200180831161024957829003601f168201915b5050505050905090565b60008061027b6103ed565b90506102888185856103f1565b5060019392505050565b60025490565b6000806102a36103ed565b90506102b08582856104a5565b6102bb8585856104ef565b506001949350505050565b601290565b6000806102d66103ed565b90506102888185856102e885896103c2565b6102f29190610a76565b6103f1565b6103086103026103ed565b826105f0565b50565b6001600160a01b0381166000908152602081905260409020545b919050565b61033c826103366103ed565b836104a5565b61034682826105f0565b5050565b6060600480546101ed90610a9a565b6000806103646103ed565b9050600061037282866103c2565b90508381101561039d5760405162461bcd60e51b815260040161039490610a1a565b60405180910390fd5b6102bb82868684036103f1565b6000806103b56103ed565b90506102888185856104ef565b6001600160a01b03918216600090815260016020908152604080832093909416825291909152205490565b3390565b6001600160a01b0383166104175760405162461bcd60e51b8152600401610394906109d6565b6001600160a01b03821661043d5760405162461bcd60e51b815260040161039490610891565b6001600160a01b0380841660008181526001602090815260408083209487168084529490915290819020849055517f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92590610498908590610a5f565b60405180910390a3505050565b60006104b184846103c2565b905060001981146104e957818110156104dc5760405162461bcd60e51b8152600401610394906108d3565b6104e984848484036103f1565b50505050565b6001600160a01b0383166105155760405162461bcd60e51b815260040161039490610991565b6001600160a01b03821661053b5760405162461bcd60e51b81526004016103949061080c565b6105468383836106c3565b6001600160a01b0383166000908152602081905260409020548181101561057f5760405162461bcd60e51b81526004016103949061090a565b6001600160a01b0380851660008181526020819052604080822086860390559286168082529083902080548601905591517fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef906105dd908690610a5f565b60405180910390a36104e98484846106c3565b6001600160a01b0382166106165760405162461bcd60e51b815260040161039490610950565b610622826000836106c3565b6001600160a01b0382166000908152602081905260409020548181101561065b5760405162461bcd60e51b81526004016103949061084f565b6001600160a01b0383166000818152602081905260408082208585039055600280548690039055519091907fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef906106b3908690610a5f565b60405180910390a36106c3836000845b505050565b80356001600160a01b038116811461032557600080fd5b6000602082840312156106f0578081fd5b6106f9826106c8565b9392505050565b60008060408385031215610712578081fd5b61071b836106c8565b9150610729602084016106c8565b90509250929050565b600080600060608486031215610746578081fd5b61074f846106c8565b925061075d602085016106c8565b9150604084013590509250925092565b6000806040838503121561077f578182fd5b610788836106c8565b946020939093013593505050565b6000602082840312156107a7578081fd5b5035919050565b901515815260200190565b6000602080835283518082850152825b818110156107e5578581018301518582016040015282016107c9565b818111156107f65783604083870101525b50601f01601f1916929092016040019392505050565b60208082526023908201527f45524332303a207472616e7366657220746f20746865207a65726f206164647260408201526265737360e81b606082015260800190565b60208082526022908201527f45524332303a206275726e20616d6f756e7420657863656564732062616c616e604082015261636560f01b606082015260800190565b60208082526022908201527f45524332303a20617070726f766520746f20746865207a65726f206164647265604082015261737360f01b606082015260800190565b6020808252601d908201527f45524332303a20696e73756666696369656e7420616c6c6f77616e6365000000604082015260600190565b60208082526026908201527f45524332303a207472616e7366657220616d6f756e7420657863656564732062604082015265616c616e636560d01b606082015260800190565b60208082526021908201527f45524332303a206275726e2066726f6d20746865207a65726f206164647265736040820152607360f81b606082015260800190565b60208082526025908201527f45524332303a207472616e736665722066726f6d20746865207a65726f206164604082015264647265737360d81b606082015260800190565b60208082526024908201527f45524332303a20617070726f76652066726f6d20746865207a65726f206164646040820152637265737360e01b606082015260800190565b60208082526025908201527f45524332303a2064656372656173656420616c6c6f77616e63652062656c6f77604082015264207a65726f60d81b606082015260800190565b90815260200190565b60ff91909116815260200190565b60008219821115610a9557634e487b7160e01b81526011600452602481fd5b500190565b600281046001821680610aae57607f821691505b60208210811415610acf57634e487b7160e01b600052602260045260246000fd5b5091905056fea2646970667358221220ee440af4cd71ebba4b60a20122d9b03e572bfd6be5d9daaf9e862b3cb48cef6864736f6c63430008000033"; // Replace with actual compiled token bytecode
    const saleABI = ["function buyTokens() public payable", "constructor(address tokenAddress)"];
    const saleBytecode = "0x6080604052655af3107a40006003556402540be40060045534801561002357600080fd5b5060405161095e38038061095e833981016040819052610042916100cb565b61005261004d610077565b61007b565b600180546001600160a01b0319166001600160a01b03929092169190911790556100f9565b3390565b600080546001600160a01b038381166001600160a01b0319831681178455604051919092169283917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09190a35050565b6000602082840312156100dc578081fd5b81516001600160a01b03811681146100f2578182fd5b9392505050565b610856806101086000396000f3fe60806040526004361061009c5760003560e01c8063c7876ea411610064578063c7876ea41461012f578063c8bdbfb614610144578063d0febe4c14610159578063eb91d37e14610161578063f2fde38b14610176578063fc0c546a146101965761009c565b80630f017262146100a1578063629d4ff4146100b8578063715018a6146100e357806383caf275146100f85780638da5cb5b1461010d575b600080fd5b3480156100ad57600080fd5b506100b66101ab565b005b3480156100c457600080fd5b506100cd6101f6565b6040516100da919061079c565b60405180910390f35b3480156100ef57600080fd5b506100b66101fc565b34801561010457600080fd5b506100cd610210565b34801561011957600080fd5b50610122610216565b6040516100da9190610694565b34801561013b57600080fd5b506100cd610225565b34801561015057600080fd5b506100b661022b565b6100b6610344565b34801561016d57600080fd5b506100cd61051e565b34801561018257600080fd5b506100b661019136600461062e565b610555565b3480156101a257600080fd5b5061012261058c565b6101b361059b565b6101bb610216565b6001600160a01b03166108fc479081150290604051600060405180830381858888f193505050501580156101f3573d6000803e3d6000fd5b50565b60025481565b61020461059b565b61020e60006105da565b565b60045481565b6000546001600160a01b031690565b60035481565b61023361059b565b6001546040516370a0823160e01b81526000916001600160a01b0316906370a0823190610264903090600401610694565b60206040518083038186803b15801561027c57600080fd5b505afa158015610290573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102b4919061067c565b6001549091506001600160a01b031663a9059cbb6102d0610216565b836040518363ffffffff1660e01b81526004016102ee9291906106a8565b602060405180830381600087803b15801561030857600080fd5b505af115801561031c573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610340919061065c565b5050565b6000341161036d5760405162461bcd60e51b815260040161036490610707565b60405180910390fd5b600061037761051e565b905060008161038e34670de0b6b3a76400006107eb565b61039891906107cb565b6001546040516370a0823160e01b815291925082916001600160a01b03909116906370a08231906103cd903090600401610694565b60206040518083038186803b1580156103e557600080fd5b505afa1580156103f9573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061041d919061067c565b101561043b5760405162461bcd60e51b815260040161036490610737565b346002600082825461044d91906107b3565b909155505060015460405163a9059cbb60e01b81526001600160a01b039091169063a9059cbb9061048490339085906004016106a8565b602060405180830381600087803b15801561049e57600080fd5b505af11580156104b2573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906104d6919061065c565b50336001600160a01b03167f8fafebcaf9d154343dad25669bfa277f4fbacd7ac6b0c4fed522580e040a0f3334836040516105129291906107a5565b60405180910390a25050565b6000670de0b6b3a764000060025460045461053991906107eb565b61054391906107cb565b60035461055091906107b3565b905090565b61055d61059b565b6001600160a01b0381166105835760405162461bcd60e51b8152600401610364906106c1565b6101f3816105da565b6001546001600160a01b031681565b6105a361062a565b6001600160a01b03166105b4610216565b6001600160a01b03161461020e5760405162461bcd60e51b815260040161036490610767565b600080546001600160a01b038381166001600160a01b0319831681178455604051919092169283917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09190a35050565b3390565b60006020828403121561063f578081fd5b81356001600160a01b0381168114610655578182fd5b9392505050565b60006020828403121561066d578081fd5b81518015158114610655578182fd5b60006020828403121561068d578081fd5b5051919050565b6001600160a01b0391909116815260200190565b6001600160a01b03929092168252602082015260400190565b60208082526026908201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160408201526564647265737360d01b606082015260800190565b60208082526016908201527553656e64204e455820746f2062757920746f6b656e7360501b604082015260600190565b602080825260169082015275139bdd08195b9bdd59da081d1bdad95b9cc81b19599d60521b604082015260600190565b6020808252818101527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572604082015260600190565b90815260200190565b918252602082015260400190565b600082198211156107c6576107c661080a565b500190565b6000826107e657634e487b7160e01b81526012600452602481fd5b500490565b60008160001904831182151516156108055761080561080a565b500290565b634e487b7160e01b600052601160045260246000fdfea2646970667358221220505791325313dd1d196fc327d1d684aede0ba9531f74c085e2bb3c734ca53d5664736f6c63430008000033"  // Ganti dengan real compiled bonding curve bytecode jika tersedia
}

] }"; // Replace with actual compiled bonding curve bytecode

try {
      const factoryToken = new ethers.ContractFactory(tokenABI, tokenBytecode, signer);
      const tokenContract = await factoryToken.deploy(name, symbol, ethers.utils.parseUnits(supply, 18));
      await tokenContract.deployed();

      const factorySale = new ethers.ContractFactory(saleABI, saleBytecode, signer);
      const saleContract = await factorySale.deploy(tokenContract.address);
      await saleContract.deployed();

      await tokenContract.transfer(saleContract.address, ethers.utils.parseUnits(supply, 18));

      saleAddress = saleContract.address;
      document.getElementById('txResult').innerText = `Coin deployed at ${tokenContract.address}\nSale at ${saleAddress}`;
      document.getElementById('buyTokenButton').classList.remove('hidden');
    } catch (err) {
      alert("Error: " + err.message);
      console.error(err);
    }
  });

  async function buyToken() {
    const abi = ["function buyTokens() public payable"];
    const contract = new ethers.Contract(saleAddress, abi, signer);
    const input = prompt("Enter how many NEX you want to spend (e.g. 1):");
    if (!input || isNaN(input)) return;
    try {
      const tx = await contract.buyTokens({ value: ethers.utils.parseEther(input) });
      await tx.wait();
      alert("Token purchased successfully!");
    } catch (err) {
      alert("Transaction failed: " + err.message);
    }
  }
  </script>
<script>
    function toggleLinks() {
      const section = document.getElementById('socialLinks');
      if (section.style.display === 'none' || !section.style.display) {
        section.style.display = 'block';
      } else {
        section.style.display = 'none';
      }
    }
    </script><script>
    function toggleLinks() {
      const section = document.getElementById('socialLinks');
      section.classList.toggle('hidden');
    }
    </script></body>
</html>
